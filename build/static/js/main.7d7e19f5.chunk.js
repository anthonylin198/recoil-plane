(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{35:function(e,t,a){e.exports=a(71)},63:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"shipPositionState",function(){return p}),a.d(n,"enemyPositionState",function(){return b}),a.d(n,"laserPositionState",function(){return h}),a.d(n,"scoreState",function(){return d});var r=a(0),o=a.n(r),i=a(7),c=a.n(i),l=a(4),u=a(2),s=a(6),m=a(3),f=a(28),y=a(1),p=Object(m.atom)({key:"shipPosition",default:{position:{},rotation:{}}}),b=Object(m.atom)({key:"enemyPosition",default:[{x:-10,y:10,z:-80},{x:20,y:20,z:-100}]}),h=Object(m.atom)({key:"laserPositions",default:[]}),d=Object(m.atom)({key:"score",default:0}),E=(a(63),a(34)),g=document.getElementById("root"),x=100,j=1,O=.1,v=-50;function w(){return o.a.createElement("mesh",{visible:!0,position:[0,0,0],rotation:[0,0,0]},o.a.createElement("sphereGeometry",{attach:"geometry",args:[1,16,16]}),o.a.createElement("meshStandardMaterial",{attach:"material",color:"white",transparent:!0,opacity:.6,roughness:1,metalness:0}))}function z(){var e=Object(r.useRef)();return Object(s.b)(function(){e.current.position.z+=.4}),o.a.createElement("mesh",{visible:!0,position:[0,v,0],rotation:[-Math.PI/2,0,0],ref:e},o.a.createElement("planeBufferGeometry",{attach:"geometry",args:[5e3,5e3,128,128]}),o.a.createElement("meshStandardMaterial",{attach:"material",color:"white",roughness:1,metalness:0,wireframe:!0}))}function S(){var e=Object(m.useRecoilState)(p),t=Object(u.a)(e,2),a=t[0],n=t[1],i=Object(r.useRef)();Object(s.b)(function(e){var t=e.mouse;n({position:{x:6*t.x,y:2*t.y},rotation:{z:.5*-t.x,x:.5*-t.x,y:.2*-t.y}})}),Object(s.b)(function(){i.current.rotation.z=a.rotation.z,i.current.rotation.y=a.rotation.x,i.current.rotation.x=a.rotation.y,i.current.position.y=a.position.y,i.current.position.x=a.position.x});var c=Object(s.c)(f.a,"models/arwing.glb").nodes;return o.a.createElement("group",{ref:i},o.a.createElement("mesh",{visible:!0,geometry:c.Default.geometry},o.a.createElement("meshStandardMaterial",{attach:"material",color:"white",roughness:1,metalness:0})))}function k(){var e=Object(r.useRef)(),t=Object(r.useRef)(),a=(new y.TextureLoader).load("target.png");return Object(s.b)(function(a){var n=a.mouse;e.current.position.y=10*-n.y,e.current.position.x=30*-n.x,t.current.position.y=20*-n.y,t.current.position.x=60*-n.x}),o.a.createElement("group",null,o.a.createElement("sprite",{position:[0,0,-8],ref:e},o.a.createElement("spriteMaterial",{attach:"material",map:a})),o.a.createElement("sprite",{position:[0,0,-16],ref:t},o.a.createElement("spriteMaterial",{attach:"material",map:a})))}function R(){var e=Object(m.useRecoilValue)(b);return o.a.createElement("group",null,e.map(function(e){return o.a.createElement("mesh",{position:[e.x,e.y,e.z],key:"".concat(e.x)},o.a.createElement("sphereBufferGeometry",{attach:"geometry",args:[2,8,8]}),o.a.createElement("meshStandardMaterial",{attach:"material",color:"white",wireframe:!0}))}))}function M(){var e=Object(m.useRecoilValue)(p),t=Object(m.useRecoilState)(h),a=Object(u.a)(t,2),n=a[0],r=a[1];return o.a.createElement("mesh",{position:[0,0,-8],onClick:function(){return r([].concat(Object(l.a)(n),[{id:Math.random(),x:0,y:0,z:0,velocity:[6*e.rotation.x,5*e.rotation.y]}]))}},o.a.createElement("planeBufferGeometry",{attach:"geometry",args:[100,100]}),o.a.createElement("meshStandardMaterial",{attach:"material",color:"orange",emissive:"#ff0860",visible:!1}))}function P(){var e=Object(m.useRecoilValue)(h);return o.a.createElement("group",null,e.map(function(e){return o.a.createElement("mesh",{position:[e.x,e.y,e.z],key:"".concat(e.id)},o.a.createElement("boxBufferGeometry",{attach:"geometry",args:[1,1,1]}),o.a.createElement("meshStandardMaterial",{attach:"material",emissive:"white",wireframe:!0}))}))}function B(){var e=Object(m.useRecoilState)(b),t=Object(u.a)(e,2),a=t[0],n=t[1],r=Object(m.useRecoilState)(h),o=Object(u.a)(r,2),i=o[0],c=o[1],l=Object(m.useRecoilState)(d),f=Object(u.a)(l,2),y=f[0],p=f[1];return Object(s.b)(function(e){e.mouse;var t=a?a.map(function(e){return i.filter(function(t){return t.z-e.z<1&&t.x-e.x<1&&t.y-e.y<1}).length>0}):[];t.includes(!0)&&a.length>0&&(p(y+1),console.log("hit detected")),n(a.map(function(e){return{x:e.x,y:e.y,z:e.z+O}}).filter(function(e,a){return!t[a]&&e.z<0})),c(i.map(function(e){return{id:e.id,x:e.x+e.velocity[0],y:e.y+e.velocity[1],z:e.z-j,velocity:e.velocity}}).filter(function(e){return e.z>-x&&e.y>v}))}),null}function G(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(s.a,{style:{background:"black"}},o.a.createElement(m.RecoilRoot,null,o.a.createElement(E.a,{nodes:n,root:g}),o.a.createElement("directionalLight",{intensity:1}),o.a.createElement("ambientLight",{intensity:.1}),o.a.createElement(r.Suspense,{fallback:o.a.createElement(w,null)},o.a.createElement(S,null)),o.a.createElement(k,null),o.a.createElement(R,null),o.a.createElement(P,null),o.a.createElement(z,null),o.a.createElement(M,null),o.a.createElement(B,null))),o.a.createElement("a",{href:"https://codeworkshop.dev/blog/2020-06-23-build-a-game-with-react-three-fiber-and-recoil/",className:"blog-link",target:"_blank",rel:"noopener noreferrer"},"Blog Post"))}var I=document.getElementById("root");c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(G,null)),I)}},[[35,1,2]]]);
//# sourceMappingURL=main.7d7e19f5.chunk.js.map